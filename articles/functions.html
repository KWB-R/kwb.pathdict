<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Functions in this Package • kwb.pathdict</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Functions in this Package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">kwb.pathdict</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/compress.html">Compression of Paths</a>
    </li>
    <li>
      <a href="../articles/functions.html">Functions in this Package</a>
    </li>
    <li>
      <a href="../articles/introduction.html">Working with File Paths in R Scripts</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/KWB-R/kwb.pathdict">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Functions in this Package</h1>
                        <h4 class="author">Hauke Sonnenberg</h4>
            
            <h4 class="date">2019-03-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/KWB-R/kwb.pathdict/blob/master/vignettes/functions.Rmd"><code>vignettes/functions.Rmd</code></a></small>
      <div class="hidden name"><code>functions.Rmd</code></div>

    </div>

    
    
<p>This vignette describes the functions that have not yet been described in other vignettes.</p>
<div id="provide-random-example-paths" class="section level3">
<h3 class="hasAnchor">
<a href="#provide-random-example-paths" class="anchor"></a>Provide Random Example Paths</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">53653815</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3">(paths &lt;-<span class="st"> </span>kwb.pathdict<span class="op">::</span><span class="kw">random_paths</span>(<span class="dv">4</span>, <span class="dt">min_chars =</span> <span class="dv">5</span>, <span class="dt">max_elements =</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co">#&gt;  [1] "contain/surface/woman/plain.R"          </span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="co">#&gt;  [2] "contain/surface/woman/don_t.jpg"        </span></a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co">#&gt;  [3] "contain/surface/exact/receive/order.R"  </span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">#&gt;  [4] "contain/surface/exact/receive/range.doc"</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co">#&gt;  [5] "contain/surface/exact/cotton/white.R"   </span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9"><span class="co">#&gt;  [6] "contain/surface/exact/cotton/decide.xls"</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co">#&gt;  [7] "contain/surface/exact/until.pdf"        </span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co">#&gt;  [8] "contain/party/spread/character.doc"     </span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#&gt;  [9] "contain/party/spread/afraid.xls"        </span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#&gt; [10] "contain/party/spread/ready.jpg"         </span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; [11] "contain/party/track/those.png"          </span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt; [12] "contain/party/track/after/process.doc"  </span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt; [13] "contain/party/track/engine.jpg"         </span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt; [14] "contain/vowel.png"</span></a></code></pre></div>
</div>
<div id="data_frame_to_paths" class="section level3">
<h3 class="hasAnchor">
<a href="#data_frame_to_paths" class="anchor"></a>data_frame_to_paths()</h3>
<p>The function <code>data_frame_to_paths()</code> converts a subdirectory matrix that has been converted to a data frame back to the paths by pasting all non-empty columns with slashes. Paths that do not have the maximum depth must have empty values <code>""</code> (and not <code>NA</code>) in the last columns, otherwise the string <code>NA</code> will appear in the paths.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Create subdirectory matrix as data frame</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">(subdir_data &lt;-<span class="st"> </span>kwb.file<span class="op">::</span><span class="kw">to_subdir_matrix</span>(paths, <span class="dt">result_type =</span> <span class="st">"data.frame"</span>))</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt;         V1        V2     V3            V4          V5</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 1  contain   surface  woman       plain.R            </span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt; 2  contain   surface  woman     don_t.jpg            </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt; 3  contain   surface  exact       receive     order.R</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt; 4  contain   surface  exact       receive   range.doc</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; 5  contain   surface  exact        cotton     white.R</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; 6  contain   surface  exact        cotton  decide.xls</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 7  contain   surface  exact     until.pdf            </span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; 8  contain     party spread character.doc            </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; 9  contain     party spread    afraid.xls            </span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; 10 contain     party spread     ready.jpg            </span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; 11 contain     party  track     those.png            </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; 12 contain     party  track         after process.doc</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; 13 contain     party  track    engine.jpg            </span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; 14 contain vowel.png</span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co"># Reconstruct the paths from this data frame</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">paths_reconstructed &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw">data_frame_to_paths</span>(subdir_data)</a>
<a class="sourceLine" id="cb2-21" data-line-number="21"></a>
<a class="sourceLine" id="cb2-22" data-line-number="22"><span class="co"># Check that the paths have not changed</span></a>
<a class="sourceLine" id="cb2-23" data-line-number="23"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(paths_reconstructed, paths)</a>
<a class="sourceLine" id="cb2-24" data-line-number="24"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
</div>
<div id="is_placeholder" class="section level3">
<h3 class="hasAnchor">
<a href="#is_placeholder" class="anchor"></a>is_placeholder</h3>
<p>This function checks if a string looks like a &lt;placeholder&gt;:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"abc"</span>)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"&lt;abc&gt;"</span>)</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"&lt;abc&gt;"</span>, <span class="st">"&lt;def&gt;"</span>, <span class="st">"ghi"</span>, <span class="st">"&lt;jkl&gt;"</span>))</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; [1]  TRUE  TRUE FALSE  TRUE</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"&lt;abc&gt;def"</span>)</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"&lt;abc&gt;&lt;def&gt;"</span>)</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"&lt;&gt;"</span>)</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13">kwb.pathdict<span class="op">:::</span><span class="kw">is_placeholder</span>(<span class="st">"[abc]"</span>)</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
</div>
<div id="get_dictionary_one_by_one" class="section level3">
<h3 class="hasAnchor">
<a href="#get_dictionary_one_by_one" class="anchor"></a>get_dictionary_one_by_one</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">result &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw"><a href="../reference/get_dictionary_one_by_one.html">get_dictionary_one_by_one</a></span>(paths, <span class="dt">n =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="co">#&gt; Splitting paths ... ok. (0.00s)</span></a></code></pre></div>
<p><img src="functions_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<pre><code>#&gt; Distribution of path depths:
#&gt; n_levels
#&gt; 2 4 5 
#&gt; 1 8 5 
#&gt; i = 1, n = 14...
#&gt; utils::head(y):
#&gt; contain 
#&gt;      98 
#&gt; i = 2, n = 14...
#&gt; utils::head(y):
#&gt; x
#&gt;   contain/surface     contain/party contain/vowel.png 
#&gt;               105                78                17 
#&gt; i = 3, n = 13...
#&gt; utils::head(y):
#&gt; x
#&gt; contain/surface/exact  contain/party/spread   contain/party/track 
#&gt;                   105                    60                    57 
#&gt; contain/surface/woman 
#&gt;                    42 
#&gt; i = 4, n = 13...
#&gt; utils::head(y):
#&gt; x
#&gt;      contain/surface/exact/receive       contain/surface/exact/cotton 
#&gt;                                 58                                 56 
#&gt; contain/party/spread/character.doc    contain/party/spread/afraid.xls 
#&gt;                                 34                                 31 
#&gt;    contain/surface/exact/until.pdf    contain/surface/woman/don_t.jpg 
#&gt;                                 31                                 31 
#&gt; i = 5, n = 5...
#&gt; utils::head(y):
#&gt; x
#&gt; contain/surface/exact/cotton/decide.xls 
#&gt;                                      39 
#&gt; contain/surface/exact/receive/range.doc 
#&gt;                                      39 
#&gt;   contain/party/track/after/process.doc 
#&gt;                                      37 
#&gt;   contain/surface/exact/receive/order.R 
#&gt;                                      37 
#&gt;    contain/surface/exact/cotton/white.R 
#&gt;                                      36 
#&gt;                                      path score length count score2
#&gt; 1                   contain/surface/exact   105     21     5     85
#&gt; 2                         contain/surface   105     15     7     77
#&gt; 3           contain/surface/exact/receive    58     29     2     50
#&gt; 4                                 contain    98      7    14     42
#&gt; 5 contain/surface/exact/cotton/decide.xls    39     39     1     35
#&gt;  i key score count length                  path score2
#&gt;  1  p1   105     5     21 contain/surface/exact     85
#&gt;                                      path score length count score2
#&gt; 1                         contain/surface   105     15     7     77
#&gt; 2                                 contain    98      7    14     42
#&gt; 3 contain/surface/exact/cotton/decide.xls    39     22     1     18
#&gt; 4           contain/surface/exact/receive    58     12     2     16
#&gt;  i key score count length            path score2
#&gt;  2  p2   105     7     15 contain/surface     77
#&gt;                                      path score length count score2
#&gt; 1                                 contain    98      7    14     42
#&gt; 2 contain/surface/exact/cotton/decide.xls    39     11     1      7
#&gt; 3           contain/surface/exact/receive    58      1     2     -6
#&gt;  i key score count length    path score2
#&gt;  3  p3    98    14      7 contain     42
#&gt;                                      path score length count score2
#&gt; 1 contain/surface/exact/cotton/decide.xls    39      8     1      4
#&gt; 2           contain/surface/exact/receive    58     -2     2    -12
#&gt;  i key score count length                                    path score2
#&gt;  4  p4    39     1      8 contain/surface/exact/cotton/decide.xls      4
#&gt;                            path score length count score2
#&gt; 1 contain/surface/exact/receive    58     -2     2    -12
#&gt;  i key score count length                          path score2
#&gt;  5  p5    58     2     -2 contain/surface/exact/receive    -12
result
#&gt; $p1
#&gt; [1] "contain/surface/exact"
#&gt; 
#&gt; $p2
#&gt; [1] "contain/surface"
#&gt; 
#&gt; $p3
#&gt; [1] "contain"
#&gt; 
#&gt; $p4
#&gt; [1] "contain/surface/exact/cotton/decide.xls"
#&gt; 
#&gt; $p5
#&gt; [1] "contain/surface/exact/receive"</code></pre>
</div>
<div id="subfolder-frequency-functions" class="section level3">
<h3 class="hasAnchor">
<a href="#subfolder-frequency-functions" class="anchor"></a>Subfolder Frequency Functions</h3>
<p>At the start of <code><a href="../reference/get_dictionary_one_by_one.html">get_dictionary_one_by_one()</a></code> the function <code>get_subdir_frequencies()</code> is called. This function can be given a vector of path strings as input. For each possible depth in the path tree all different sub-paths are determined and ordered by their “importance”, i.e. by the product of frequency and path length in number of characters. By default, only the most important path per depth level is returned:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">frequencies &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw">get_subdir_frequencies</span>(<span class="dt">paths =</span> paths, <span class="dt">dbg =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; Splitting paths ... ok. (0.00s)</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Define helper function for output</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">print_frequencies &lt;-<span class="st"> </span><span class="cf">function</span>(f) {</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="cf">for</span> (i <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/seq">seq_along</a></span>(f)) {</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/message">message</a></span>(<span class="st">"</span><span class="ch">\n</span><span class="st">depth = "</span>, i)</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/print">print</a></span>(kwb.pathdict<span class="op">:::</span><span class="kw"><a href="../reference/named_vector_to_data_frame.html">named_vector_to_data_frame</a></span>(f[[i]]))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb6-11" data-line-number="11"></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="kw">print_frequencies</span>(frequencies)</a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="co">#&gt; depth = 1</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="co">#&gt;      name value</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="co">#&gt; 1 contain    98</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="co">#&gt; depth = 2</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="co">#&gt;              name value</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="co">#&gt; 1 contain/surface   105</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="co">#&gt; depth = 3</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="co">#&gt;                    name value</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="co">#&gt; 1 contain/surface/exact   105</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="co">#&gt; depth = 4</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="co">#&gt;                            name value</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="co">#&gt; 1 contain/surface/exact/receive    58</span></a>
<a class="sourceLine" id="cb6-29" data-line-number="29"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="co">#&gt; depth = 5</span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="co">#&gt;                                      name value</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="co">#&gt; 1 contain/surface/exact/cotton/decide.xls    39</span></a></code></pre></div>
<p>All different paths are returned when the argument <code>first.only</code> is set to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">all_frequencies &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw">get_subdir_frequencies</span>(</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">  <span class="dt">paths =</span> paths, <span class="dt">first.only =</span> <span class="ot">FALSE</span>, <span class="dt">dbg =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3">)</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt; Splitting paths ... ok. (0.00s)</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="kw">print_frequencies</span>(all_frequencies)</a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; depth = 1</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;      name value</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; 1 contain    98</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; depth = 2</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;                name value</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 1   contain/surface   105</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 2     contain/party    78</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 3 contain/vowel.png    17</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; depth = 3</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt;                    name value</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; 1 contain/surface/exact   105</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; 2  contain/party/spread    60</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; 3   contain/party/track    57</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23"><span class="co">#&gt; 4 contain/surface/woman    42</span></a>
<a class="sourceLine" id="cb7-24" data-line-number="24"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-25" data-line-number="25"><span class="co">#&gt; depth = 4</span></a>
<a class="sourceLine" id="cb7-26" data-line-number="26"><span class="co">#&gt;                                  name value</span></a>
<a class="sourceLine" id="cb7-27" data-line-number="27"><span class="co">#&gt; 1       contain/surface/exact/receive    58</span></a>
<a class="sourceLine" id="cb7-28" data-line-number="28"><span class="co">#&gt; 2        contain/surface/exact/cotton    56</span></a>
<a class="sourceLine" id="cb7-29" data-line-number="29"><span class="co">#&gt; 3  contain/party/spread/character.doc    34</span></a>
<a class="sourceLine" id="cb7-30" data-line-number="30"><span class="co">#&gt; 4     contain/party/spread/afraid.xls    31</span></a>
<a class="sourceLine" id="cb7-31" data-line-number="31"><span class="co">#&gt; 5     contain/surface/exact/until.pdf    31</span></a>
<a class="sourceLine" id="cb7-32" data-line-number="32"><span class="co">#&gt; 6     contain/surface/woman/don_t.jpg    31</span></a>
<a class="sourceLine" id="cb7-33" data-line-number="33"><span class="co">#&gt; 7      contain/party/spread/ready.jpg    30</span></a>
<a class="sourceLine" id="cb7-34" data-line-number="34"><span class="co">#&gt; 8      contain/party/track/engine.jpg    30</span></a>
<a class="sourceLine" id="cb7-35" data-line-number="35"><span class="co">#&gt; 9       contain/party/track/those.png    29</span></a>
<a class="sourceLine" id="cb7-36" data-line-number="36"><span class="co">#&gt; 10      contain/surface/woman/plain.R    29</span></a>
<a class="sourceLine" id="cb7-37" data-line-number="37"><span class="co">#&gt; 11          contain/party/track/after    25</span></a>
<a class="sourceLine" id="cb7-38" data-line-number="38"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-39" data-line-number="39"><span class="co">#&gt; depth = 5</span></a>
<a class="sourceLine" id="cb7-40" data-line-number="40"><span class="co">#&gt;                                      name value</span></a>
<a class="sourceLine" id="cb7-41" data-line-number="41"><span class="co">#&gt; 1 contain/surface/exact/cotton/decide.xls    39</span></a>
<a class="sourceLine" id="cb7-42" data-line-number="42"><span class="co">#&gt; 2 contain/surface/exact/receive/range.doc    39</span></a>
<a class="sourceLine" id="cb7-43" data-line-number="43"><span class="co">#&gt; 3   contain/party/track/after/process.doc    37</span></a>
<a class="sourceLine" id="cb7-44" data-line-number="44"><span class="co">#&gt; 4   contain/surface/exact/receive/order.R    37</span></a>
<a class="sourceLine" id="cb7-45" data-line-number="45"><span class="co">#&gt; 5    contain/surface/exact/cotton/white.R    36</span></a></code></pre></div>
<p>The function <code>to_frequency_data()</code> is called next within <code><a href="../reference/get_dictionary_one_by_one.html">get_dictionary_one_by_one()</a></code>. It converts the list returned by <code>get_subdir_frequencies()</code> to a data frame.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Convert frequency list to data frame</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">(frequency_data &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw">to_frequency_data</span>(frequencies))</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;                                      path score length count</span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 1                         contain/surface   105     15     7</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; 2                   contain/surface/exact   105     21     5</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co">#&gt; 3                                 contain    98      7    14</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; 4           contain/surface/exact/receive    58     29     2</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; 5 contain/surface/exact/cotton/decide.xls    39     39     1</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9">(all_frequency_data &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw">to_frequency_data</span>(all_frequencies))</a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co">#&gt;                                       path score length count</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="co">#&gt; 1                          contain/surface   105     15     7</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="co">#&gt; 2                    contain/surface/exact   105     21     5</span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; 3                                  contain    98      7    14</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; 4                            contain/party    78     13     6</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt; 5                     contain/party/spread    60     20     3</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt; 6            contain/surface/exact/receive    58     29     2</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#&gt; 7                      contain/party/track    57     19     3</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; 8             contain/surface/exact/cotton    56     28     2</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="co">#&gt; 9                    contain/surface/woman    42     21     2</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="co">#&gt; 10 contain/surface/exact/cotton/decide.xls    39     39     1</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; 11 contain/surface/exact/receive/range.doc    39     39     1</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt; 12   contain/party/track/after/process.doc    37     37     1</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt; 13   contain/surface/exact/receive/order.R    37     37     1</span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt; 14    contain/surface/exact/cotton/white.R    36     36     1</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt; 15      contain/party/spread/character.doc    34     34     1</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt; 16         contain/party/spread/afraid.xls    31     31     1</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt; 17         contain/surface/exact/until.pdf    31     31     1</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt; 18         contain/surface/woman/don_t.jpg    31     31     1</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">#&gt; 19          contain/party/spread/ready.jpg    30     30     1</span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="co">#&gt; 20          contain/party/track/engine.jpg    30     30     1</span></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"><span class="co">#&gt; 21           contain/party/track/those.png    29     29     1</span></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="co">#&gt; 22           contain/surface/woman/plain.R    29     29     1</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33"><span class="co">#&gt; 23               contain/party/track/after    25     25     1</span></a>
<a class="sourceLine" id="cb8-34" data-line-number="34"><span class="co">#&gt; 24                       contain/vowel.png    17     17     1</span></a></code></pre></div>
<p>The function <code><a href="../reference/rescore_and_reorder_frequency_data.html">rescore_and_reorder_frequency_data()</a></code> takes a data frame with columns <code>length</code> and <code>count</code> as input. It calculates <code>score = (length - nchar(to_placeholder(key))) * count</code> and orders the data frame decreasingly by this score.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Size of placeholder to be used instead of a path (number of characters)</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">size &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/nchar">nchar</a></span>(<span class="st">"&lt;p1&gt;"</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"></a>
<a class="sourceLine" id="cb9-4" data-line-number="4">kwb.pathdict<span class="op">:::</span><span class="kw"><a href="../reference/rescore_and_reorder_frequency_data.html">rescore_and_reorder_frequency_data</a></span>(frequency_data, size)</a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;                                      path score length count score2</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; 1                   contain/surface/exact   105     21     5     85</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; 2                         contain/surface   105     15     7     77</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; 3           contain/surface/exact/receive    58     29     2     50</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 4                                 contain    98      7    14     42</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; 5 contain/surface/exact/cotton/decide.xls    39     39     1     35</span></a></code></pre></div>
</div>
<div id="get_next_level" class="section level3">
<h3 class="hasAnchor">
<a href="#get_next_level" class="anchor"></a>get_next_level()</h3>
<p>The function <code>get_next_level()</code> is a helper function that is called by the function <code>compress_one_by_one()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">kwb.pathdict<span class="op">:::</span>get_next_level</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; function (x, key, set.attributes = FALSE, dbg = FALSE) </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;     freqs &lt;- get_subdir_frequencies(paths = x, dbg = dbg)</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt;     allfreqs &lt;- sort(unlist(freqs), decreasing = TRUE)</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;     dict &lt;- structure(list(names(allfreqs[1])), names = key)</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;     result &lt;- use_dictionary(x, dict, method = "part")</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;     if (set.attributes) {</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt;         attr(result, "freqs") &lt;- freqs</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt;         attr(result, "dict") &lt;- dict</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt;     result</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; &lt;bytecode: 0x3e545f0&gt;</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a></code></pre></div>
</div>
<div id="get_subdirs_by_frequence" class="section level3">
<h3 class="hasAnchor">
<a href="#get_subdirs_by_frequence" class="anchor"></a>get_subdirs_by_frequence()</h3>
<p>The function <code>get_subdirs_by_frequence()</code> is used by a FAKIN script that is not yet part of a package. It gets different inputs:</p>
<ol style="list-style-type: decimal">
<li>
<code>subdirs</code>: subdirectory matrix</li>
<li>
<code>cumid</code>: cumulative identifier, created with <code>kwb.pathdict:::to_cumulative_id()</code>
</li>
<li>
<code>freqinfo</code>: one-row data frame with columns <code>depth</code>, <code>n.x</code>, <code>n.Freq</code>
</li>
</ol>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">subdirs &lt;-<span class="st"> </span>kwb.file<span class="op">::</span><span class="kw">to_subdir_matrix</span>(paths)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">cumid &lt;-<span class="st"> </span>kwb.pathdict<span class="op">:::</span><span class="kw"><a href="../reference/to_cumulative_id.html">to_cumulative_id</a></span>(subdirs)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="co">#&gt; depth: 00 1 2 3 4 5</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">freqinfo &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/data.frame">data.frame</a></span>(<span class="dt">depth =</span> <span class="dv">2</span>, <span class="dt">n.x =</span> <span class="dv">10</span>, <span class="dt">n.Freq =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"></a>
<a class="sourceLine" id="cb11-6" data-line-number="6">kwb.pathdict<span class="op">:::</span><span class="kw">get_subdirs_by_frequence</span>(subdirs, cumid, freqinfo)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="co">#&gt; freqinfo:</span></a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="co">#&gt;   depth n.x n.Freq</span></a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="co">#&gt; 1     2  10     10</span></a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="co">#&gt; [1] NA NA</span></a></code></pre></div>
</div>
<div id="functions-that-still-need-to-be-described" class="section level3">
<h3 class="hasAnchor">
<a href="#functions-that-still-need-to-be-described" class="anchor"></a>Functions that still need to be described</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">kwb.pathdict<span class="op">:::</span>log_result_if</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="co">#&gt; function (dbg, x, y) </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;     if (dbg) {</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;         kwb.utils::catLines(c("\n### x:", x))</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;         kwb.utils::catLines(c("\n### y:", y))</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;         cat("\n### str(dict):\n")</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt;         utils::str(kwb.utils::getAttribute(y, "dict"))</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; &lt;bytecode: 0x4fbdbf8&gt;</span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13">kwb.pathdict<span class="op">:::</span>lookup_in_dictionary</a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; function (x, dict) </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt;     ready &lt;- x %in% to_placeholder(names(dict))</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt;     out &lt;- x</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt;     out[!ready] &lt;- to_placeholder(names(dict[match(x[!ready], </span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="co">#&gt;         dict)]))</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="co">#&gt;     out</span></a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="co">#&gt; &lt;bytecode: 0x501cee8&gt;</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24">kwb.pathdict<span class="op">:::</span>main_columns_winner</a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="co">#&gt; function () </span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="co">#&gt;     c("i", "key", "score", "count", "length")</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="co">#&gt; &lt;bytecode: 0x51b35a0&gt;</span></a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-31" data-line-number="31">kwb.pathdict<span class="op">:::</span>print_path_frequencies</a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="co">#&gt; function (x, maxchar = 80) </span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="co">#&gt;     x$path &lt;- substr(x$path, 1, maxchar)</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="co">#&gt;     print(x)</span></a>
<a class="sourceLine" id="cb12-36" data-line-number="36"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-37" data-line-number="37"><span class="co">#&gt; &lt;bytecode: 0x513b510&gt;</span></a>
<a class="sourceLine" id="cb12-38" data-line-number="38"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-39" data-line-number="39">kwb.pathdict<span class="op">:::</span>replace_subdirs</a>
<a class="sourceLine" id="cb12-40" data-line-number="40"><span class="co">#&gt; function (s, r, p) </span></a>
<a class="sourceLine" id="cb12-41" data-line-number="41"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-42" data-line-number="42"><span class="co">#&gt;     selected &lt;- starts_with_parts(s, r)</span></a>
<a class="sourceLine" id="cb12-43" data-line-number="43"><span class="co">#&gt;     cols &lt;- seq(length(r) + 1, ncol(s))</span></a>
<a class="sourceLine" id="cb12-44" data-line-number="44"><span class="co">#&gt;     fillright &lt;- matrix(nrow = sum(selected), ncol = length(r) - </span></a>
<a class="sourceLine" id="cb12-45" data-line-number="45"><span class="co">#&gt;         1)</span></a>
<a class="sourceLine" id="cb12-46" data-line-number="46"><span class="co">#&gt;     s[selected, ] &lt;- cbind(p, s[selected, cols, drop = FALSE], </span></a>
<a class="sourceLine" id="cb12-47" data-line-number="47"><span class="co">#&gt;         fillright)</span></a>
<a class="sourceLine" id="cb12-48" data-line-number="48"><span class="co">#&gt;     maxcol &lt;- max(which(apply(s, 2, function(x) sum(!is.na(x))) &gt; </span></a>
<a class="sourceLine" id="cb12-49" data-line-number="49"><span class="co">#&gt;         0))</span></a>
<a class="sourceLine" id="cb12-50" data-line-number="50"><span class="co">#&gt;     s[, seq_len(maxcol)]</span></a>
<a class="sourceLine" id="cb12-51" data-line-number="51"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-52" data-line-number="52"><span class="co">#&gt; &lt;bytecode: 0x5140ba8&gt;</span></a>
<a class="sourceLine" id="cb12-53" data-line-number="53"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-54" data-line-number="54">kwb.pathdict<span class="op">:::</span>starts_with_parts</a>
<a class="sourceLine" id="cb12-55" data-line-number="55"><span class="co">#&gt; function (parts, elements) </span></a>
<a class="sourceLine" id="cb12-56" data-line-number="56"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-57" data-line-number="57"><span class="co">#&gt;     stopifnot(is.list(parts) || is.matrix(parts))</span></a>
<a class="sourceLine" id="cb12-58" data-line-number="58"><span class="co">#&gt;     stopifnot(all(!is.na(elements)))</span></a>
<a class="sourceLine" id="cb12-59" data-line-number="59"><span class="co">#&gt;     length_out &lt;- if (is.list(parts)) </span></a>
<a class="sourceLine" id="cb12-60" data-line-number="60"><span class="co">#&gt;         length(parts)</span></a>
<a class="sourceLine" id="cb12-61" data-line-number="61"><span class="co">#&gt;     else nrow(parts)</span></a>
<a class="sourceLine" id="cb12-62" data-line-number="62"><span class="co">#&gt;     selected_at_level &lt;- lapply(seq_along(elements), function(i) {</span></a>
<a class="sourceLine" id="cb12-63" data-line-number="63"><span class="co">#&gt;         if (is.list(parts)) {</span></a>
<a class="sourceLine" id="cb12-64" data-line-number="64"><span class="co">#&gt;             sapply(parts, "[", i) == elements[i]</span></a>
<a class="sourceLine" id="cb12-65" data-line-number="65"><span class="co">#&gt;         }</span></a>
<a class="sourceLine" id="cb12-66" data-line-number="66"><span class="co">#&gt;         else {</span></a>
<a class="sourceLine" id="cb12-67" data-line-number="67"><span class="co">#&gt;             !is.na(parts[, i]) &amp; (parts[, i] == elements[i])</span></a>
<a class="sourceLine" id="cb12-68" data-line-number="68"><span class="co">#&gt;         }</span></a>
<a class="sourceLine" id="cb12-69" data-line-number="69"><span class="co">#&gt;     })</span></a>
<a class="sourceLine" id="cb12-70" data-line-number="70"><span class="co">#&gt;     Reduce(`&amp;`, selected_at_level, init = rep(TRUE, length_out))</span></a>
<a class="sourceLine" id="cb12-71" data-line-number="71"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-72" data-line-number="72"><span class="co">#&gt; &lt;bytecode: 0x51a24f0&gt;</span></a>
<a class="sourceLine" id="cb12-73" data-line-number="73"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-74" data-line-number="74">kwb.pathdict<span class="op">:::</span>to_dictionary</a>
<a class="sourceLine" id="cb12-75" data-line-number="75"><span class="co">#&gt; function (x, prefix = "a", leading.zeros = FALSE) </span></a>
<a class="sourceLine" id="cb12-76" data-line-number="76"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-77" data-line-number="77"><span class="co">#&gt;     dict &lt;- as.list(names(sorted_importance(x)))</span></a>
<a class="sourceLine" id="cb12-78" data-line-number="78"><span class="co">#&gt;     keys &lt;- to_dictionary_key(seq_along(dict), prefix, leading.zeros)</span></a>
<a class="sourceLine" id="cb12-79" data-line-number="79"><span class="co">#&gt;     stats::setNames(dict, keys)</span></a>
<a class="sourceLine" id="cb12-80" data-line-number="80"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-81" data-line-number="81"><span class="co">#&gt; &lt;bytecode: 0x5208858&gt;</span></a>
<a class="sourceLine" id="cb12-82" data-line-number="82"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-83" data-line-number="83">kwb.pathdict<span class="op">:::</span>to_dictionary_key</a>
<a class="sourceLine" id="cb12-84" data-line-number="84"><span class="co">#&gt; function (i, prefix = "p", leading.zeros = FALSE) </span></a>
<a class="sourceLine" id="cb12-85" data-line-number="85"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-86" data-line-number="86"><span class="co">#&gt;     fmt &lt;- if (leading.zeros) {</span></a>
<a class="sourceLine" id="cb12-87" data-line-number="87"><span class="co">#&gt;         digits &lt;- nchar(to_dictionary_key(length(i), ""))</span></a>
<a class="sourceLine" id="cb12-88" data-line-number="88"><span class="co">#&gt;         paste0("%s%0", digits, "X")</span></a>
<a class="sourceLine" id="cb12-89" data-line-number="89"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-90" data-line-number="90"><span class="co">#&gt;     else {</span></a>
<a class="sourceLine" id="cb12-91" data-line-number="91"><span class="co">#&gt;         "%s%X"</span></a>
<a class="sourceLine" id="cb12-92" data-line-number="92"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-93" data-line-number="93"><span class="co">#&gt;     sprintf(fmt, prefix, i)</span></a>
<a class="sourceLine" id="cb12-94" data-line-number="94"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-95" data-line-number="95"><span class="co">#&gt; &lt;bytecode: 0x5119f90&gt;</span></a>
<a class="sourceLine" id="cb12-96" data-line-number="96"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-97" data-line-number="97">kwb.pathdict<span class="op">:::</span>to_placeholder</a>
<a class="sourceLine" id="cb12-98" data-line-number="98"><span class="co">#&gt; function (x) </span></a>
<a class="sourceLine" id="cb12-99" data-line-number="99"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-100" data-line-number="100"><span class="co">#&gt;     paste0("&lt;", x, "&gt;")</span></a>
<a class="sourceLine" id="cb12-101" data-line-number="101"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-102" data-line-number="102"><span class="co">#&gt; &lt;bytecode: 0x511e6c8&gt;</span></a>
<a class="sourceLine" id="cb12-103" data-line-number="103"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-104" data-line-number="104">kwb.pathdict<span class="op">:::</span>update_frequency_data_length</a>
<a class="sourceLine" id="cb12-105" data-line-number="105"><span class="co">#&gt; function (frequency_data, winner, key) </span></a>
<a class="sourceLine" id="cb12-106" data-line-number="106"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-107" data-line-number="107"><span class="co">#&gt;     winner_length &lt;- kwb.utils::selectColumns(winner, "length")</span></a>
<a class="sourceLine" id="cb12-108" data-line-number="108"><span class="co">#&gt;     winner_path &lt;- kwb.utils::selectColumns(winner, "path")</span></a>
<a class="sourceLine" id="cb12-109" data-line-number="109"><span class="co">#&gt;     data_length &lt;- kwb.utils::selectColumns(frequency_data, "length")</span></a>
<a class="sourceLine" id="cb12-110" data-line-number="110"><span class="co">#&gt;     data_path &lt;- kwb.utils::selectColumns(frequency_data, "path")</span></a>
<a class="sourceLine" id="cb12-111" data-line-number="111"><span class="co">#&gt;     shortage &lt;- winner_length - nchar(to_placeholder(key))</span></a>
<a class="sourceLine" id="cb12-112" data-line-number="112"><span class="co">#&gt;     matching &lt;- (substr(data_path, 1, winner_length) == winner_path)</span></a>
<a class="sourceLine" id="cb12-113" data-line-number="113"><span class="co">#&gt;     frequency_data$length[matching] &lt;- data_length[matching] - </span></a>
<a class="sourceLine" id="cb12-114" data-line-number="114"><span class="co">#&gt;         shortage</span></a>
<a class="sourceLine" id="cb12-115" data-line-number="115"><span class="co">#&gt;     frequency_data</span></a>
<a class="sourceLine" id="cb12-116" data-line-number="116"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-117" data-line-number="117"><span class="co">#&gt; &lt;bytecode: 0x5213578&gt;</span></a>
<a class="sourceLine" id="cb12-118" data-line-number="118"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a>
<a class="sourceLine" id="cb12-119" data-line-number="119">kwb.pathdict<span class="op">:::</span>use_dictionary</a>
<a class="sourceLine" id="cb12-120" data-line-number="120"><span class="co">#&gt; function (x, dict, method = "full") </span></a>
<a class="sourceLine" id="cb12-121" data-line-number="121"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb12-122" data-line-number="122"><span class="co">#&gt;     if (method == "full") {</span></a>
<a class="sourceLine" id="cb12-123" data-line-number="123"><span class="co">#&gt;         indices &lt;- match(x, as.character(dict))</span></a>
<a class="sourceLine" id="cb12-124" data-line-number="124"><span class="co">#&gt;         found &lt;- !is.na(indices)</span></a>
<a class="sourceLine" id="cb12-125" data-line-number="125"><span class="co">#&gt;         x[found] &lt;- to_placeholder(names(dict)[indices[found]])</span></a>
<a class="sourceLine" id="cb12-126" data-line-number="126"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-127" data-line-number="127"><span class="co">#&gt;     else if (method == "part") {</span></a>
<a class="sourceLine" id="cb12-128" data-line-number="128"><span class="co">#&gt;         keys &lt;- names(dict)</span></a>
<a class="sourceLine" id="cb12-129" data-line-number="129"><span class="co">#&gt;         n &lt;- length(keys)</span></a>
<a class="sourceLine" id="cb12-130" data-line-number="130"><span class="co">#&gt;         for (i in seq_len(n)) {</span></a>
<a class="sourceLine" id="cb12-131" data-line-number="131"><span class="co">#&gt;             key &lt;- keys[i]</span></a>
<a class="sourceLine" id="cb12-132" data-line-number="132"><span class="co">#&gt;             pattern &lt;- dict[[key]]</span></a>
<a class="sourceLine" id="cb12-133" data-line-number="133"><span class="co">#&gt;             replacement &lt;- to_placeholder(key)</span></a>
<a class="sourceLine" id="cb12-134" data-line-number="134"><span class="co">#&gt;             if (i%%20 == 0) {</span></a>
<a class="sourceLine" id="cb12-135" data-line-number="135"><span class="co">#&gt;                 cat(sprintf("%4.1f %% Substituting '%s' with '%s'...\n", </span></a>
<a class="sourceLine" id="cb12-136" data-line-number="136"><span class="co">#&gt;                   100 * i/n, pattern, replacement))</span></a>
<a class="sourceLine" id="cb12-137" data-line-number="137"><span class="co">#&gt;             }</span></a>
<a class="sourceLine" id="cb12-138" data-line-number="138"><span class="co">#&gt;             x &lt;- gsub(pattern, replacement, x, fixed = TRUE)</span></a>
<a class="sourceLine" id="cb12-139" data-line-number="139"><span class="co">#&gt;         }</span></a>
<a class="sourceLine" id="cb12-140" data-line-number="140"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-141" data-line-number="141"><span class="co">#&gt;     else {</span></a>
<a class="sourceLine" id="cb12-142" data-line-number="142"><span class="co">#&gt;         stop("use_dictionary(): method must be one of 'full', 'part'", </span></a>
<a class="sourceLine" id="cb12-143" data-line-number="143"><span class="co">#&gt;             call. = FALSE)</span></a>
<a class="sourceLine" id="cb12-144" data-line-number="144"><span class="co">#&gt;     }</span></a>
<a class="sourceLine" id="cb12-145" data-line-number="145"><span class="co">#&gt;     x</span></a>
<a class="sourceLine" id="cb12-146" data-line-number="146"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb12-147" data-line-number="147"><span class="co">#&gt; &lt;bytecode: 0x5391fb0&gt;</span></a>
<a class="sourceLine" id="cb12-148" data-line-number="148"><span class="co">#&gt; &lt;environment: namespace:kwb.pathdict&gt;</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/hsonne">Hauke Sonnenberg</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'bfce7efe9869cae7f097b79b8257cfc2',
    indexName: 'kwb_pathdict',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
